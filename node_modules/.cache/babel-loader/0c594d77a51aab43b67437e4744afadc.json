{"ast":null,"code":"import { fabric } from \"fabric\";\nexport default function (canvas, toggle, history) {\n  if (!toggle) {\n    canvas.off('mouse:down').off('mouse:move').off('mouse:up');\n    return;\n  }\n\n  let box, isDown, origX, origY;\n  canvas.on('mouse:down', function (o) {\n    isDown = true;\n    let pointer = canvas.getPointer(o.e);\n    origX = pointer.x;\n    origY = pointer.y;\n    pointer = canvas.getPointer(o.e);\n    box = new fabric.Rect({\n      left: origX,\n      top: origY,\n      fill: 'yellow',\n      width: pointer.x - origX,\n      height: pointer.y - origY,\n      opacity: 0.5\n    });\n    canvas.add(box);\n  });\n  canvas.on('mouse:move', function (o) {\n    if (!isDown) return;\n    let pointer = canvas.getPointer(o.e);\n\n    if (origX > pointer.x) {\n      box.set({\n        left: pointer.x\n      });\n    }\n\n    if (origY > pointer.y) {\n      box.set({\n        top: pointer.y\n      });\n    }\n\n    box.set({\n      width: pointer.x - origX\n    });\n    box.set({\n      height: pointer.y - origY\n    });\n    canvas.renderAll();\n  });\n  canvas.on('mouse:up', function () {\n    isDown = false;\n    history.push(JSON.stringify(canvas));\n  });\n} // code from https://stackoverflow.com/questions/9417603/fabric-js-free-draw-a-rectangle","map":{"version":3,"sources":["/Users/boo/Desktop/Local Git/poiesis/src/assets/BoundingBox.js"],"names":["fabric","canvas","toggle","history","off","box","isDown","origX","origY","on","o","pointer","getPointer","e","x","y","Rect","left","top","fill","width","height","opacity","add","set","renderAll","push","JSON","stringify"],"mappings":"AAAA,SAASA,MAAT,QAAuB,QAAvB;AAEA,eAAe,UAASC,MAAT,EAAiBC,MAAjB,EAAyBC,OAAzB,EAAkC;AAC7C,MAAI,CAACD,MAAL,EAAa;AACTD,IAAAA,MAAM,CAACG,GAAP,CAAW,YAAX,EAAyBA,GAAzB,CAA6B,YAA7B,EAA2CA,GAA3C,CAA+C,UAA/C;AACA;AACH;;AACD,MAAIC,GAAJ,EAASC,MAAT,EAAiBC,KAAjB,EAAwBC,KAAxB;AACAP,EAAAA,MAAM,CAACQ,EAAP,CAAU,YAAV,EAAwB,UAASC,CAAT,EAAY;AAChCJ,IAAAA,MAAM,GAAG,IAAT;AACA,QAAIK,OAAO,GAAGV,MAAM,CAACW,UAAP,CAAkBF,CAAC,CAACG,CAApB,CAAd;AACAN,IAAAA,KAAK,GAAGI,OAAO,CAACG,CAAhB;AACAN,IAAAA,KAAK,GAAGG,OAAO,CAACI,CAAhB;AACAJ,IAAAA,OAAO,GAAGV,MAAM,CAACW,UAAP,CAAkBF,CAAC,CAACG,CAApB,CAAV;AACAR,IAAAA,GAAG,GAAG,IAAIL,MAAM,CAACgB,IAAX,CAAgB;AAClBC,MAAAA,IAAI,EAAEV,KADY;AAElBW,MAAAA,GAAG,EAAEV,KAFa;AAGlBW,MAAAA,IAAI,EAAE,QAHY;AAIlBC,MAAAA,KAAK,EAAET,OAAO,CAACG,CAAR,GAAYP,KAJD;AAKlBc,MAAAA,MAAM,EAAEV,OAAO,CAACI,CAAR,GAAYP,KALF;AAMlBc,MAAAA,OAAO,EAAE;AANS,KAAhB,CAAN;AAQArB,IAAAA,MAAM,CAACsB,GAAP,CAAWlB,GAAX;AACH,GAfD;AAiBAJ,EAAAA,MAAM,CAACQ,EAAP,CAAU,YAAV,EAAwB,UAASC,CAAT,EAAY;AAChC,QAAI,CAACJ,MAAL,EAAa;AACb,QAAIK,OAAO,GAAGV,MAAM,CAACW,UAAP,CAAkBF,CAAC,CAACG,CAApB,CAAd;;AAEA,QAAIN,KAAK,GAAGI,OAAO,CAACG,CAApB,EAAuB;AACnBT,MAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEP,QAAAA,IAAI,EAAEN,OAAO,CAACG;AAAhB,OAAR;AACH;;AACD,QAAIN,KAAK,GAAGG,OAAO,CAACI,CAApB,EAAuB;AACnBV,MAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEN,QAAAA,GAAG,EAAEP,OAAO,CAACI;AAAf,OAAR;AACH;;AACDV,IAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEJ,MAAAA,KAAK,EAAET,OAAO,CAACG,CAAR,GAAYP;AAArB,KAAR;AACAF,IAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEH,MAAAA,MAAM,EAAEV,OAAO,CAACI,CAAR,GAAYP;AAAtB,KAAR;AAEAP,IAAAA,MAAM,CAACwB,SAAP;AACH,GAdD;AAgBAxB,EAAAA,MAAM,CAACQ,EAAP,CAAU,UAAV,EAAsB,YAAW;AAC7BH,IAAAA,MAAM,GAAG,KAAT;AACAH,IAAAA,OAAO,CAACuB,IAAR,CAAaC,IAAI,CAACC,SAAL,CAAe3B,MAAf,CAAb;AACH,GAHD;AAKH,C,CAED","sourcesContent":["import { fabric } from \"fabric\";\n\nexport default function(canvas, toggle, history) {\n    if (!toggle) {\n        canvas.off('mouse:down').off('mouse:move').off('mouse:up');\n        return;\n    }\n    let box, isDown, origX, origY;\n    canvas.on('mouse:down', function(o) {\n        isDown = true;\n        let pointer = canvas.getPointer(o.e);\n        origX = pointer.x;\n        origY = pointer.y;\n        pointer = canvas.getPointer(o.e);\n        box = new fabric.Rect({\n            left: origX,\n            top: origY,\n            fill: 'yellow',\n            width: pointer.x - origX,\n            height: pointer.y - origY,\n            opacity: 0.5\n        });\n        canvas.add(box);\n    });\n\n    canvas.on('mouse:move', function(o) {\n        if (!isDown) return;\n        let pointer = canvas.getPointer(o.e);\n\n        if (origX > pointer.x) {\n            box.set({ left: pointer.x });\n        }\n        if (origY > pointer.y) {\n            box.set({ top: pointer.y });\n        }\n        box.set({ width: pointer.x - origX });\n        box.set({ height: pointer.y - origY });\n\n        canvas.renderAll();\n    });\n\n    canvas.on('mouse:up', function() {\n        isDown = false;\n        history.push(JSON.stringify(canvas));\n    });\n    \n}\n\n// code from https://stackoverflow.com/questions/9417603/fabric-js-free-draw-a-rectangle"]},"metadata":{},"sourceType":"module"}