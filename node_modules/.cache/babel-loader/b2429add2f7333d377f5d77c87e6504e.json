{"ast":null,"code":"import { createElementVNode as _createElementVNode, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"navBar\"\n};\nconst _hoisted_2 = {\n  ref: \"cursor\",\n  class: \"cursor\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"something\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"darkmode Button\"\n}, [/*#__PURE__*/_createElementVNode(\"button\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  class: \"container\"\n};\nconst _hoisted_6 = {\n  class: \"row\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"graph horizontal-container\"\n}, [/*#__PURE__*/_createElementVNode(\"h3\", null, \"Outline\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = {\n  class: \"col\"\n};\nconst _hoisted_9 = {\n  class: \"row\"\n};\nconst _hoisted_10 = {\n  class: \"upload horizontal-container\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"Upload your graph\", -1\n/* HOISTED */\n);\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"file\",\n  id: \"files\",\n  class: \"hidden\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"label\", {\n  fo: \"\",\n  r: \"files\"\n}, \"Select file\", -1\n/* HOISTED */\n);\n\nconst _hoisted_14 = {\n  class: \"undoRedo horizontal-container\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"Functional Bar\", -1\n/* HOISTED */\n);\n\nconst _hoisted_16 = {\n  class: \"button-group\"\n};\nconst _hoisted_17 = {\n  class: \"horizontal-container min-height\"\n};\n\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"Graph\", -1\n/* HOISTED */\n);\n\nconst _hoisted_19 = {\n  ref: \"can\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_Transition, {\n    appear: \"\",\n    onEnter: $options.cursor\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_2, \"_\", 512\n    /* NEED_PATCH */\n    )]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"onEnter\"]), _hoisted_3, _hoisted_4]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _createElementVNode(\"input\", {\n    class: \"upload-button\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.uploadFile && $options.uploadFile(...args))\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  ), _hoisted_12, _hoisted_13]), _createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.undoHistory && $options.undoHistory(...args))\n  }, \" Undo \"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.redoHistory && $options.redoHistory(...args))\n  }, \" Redo \"), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.onBoundingBoxActive && $options.onBoundingBoxActive(...args))\n  }, \" Bounding Box \"), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.logCanvasData && $options.logCanvasData(...args))\n  }, \" Log Canvas \")])])]), _createElementVNode(\"div\", _hoisted_17, [_hoisted_18, _createElementVNode(\"canvas\", _hoisted_19, null, 512\n  /* NEED_PATCH */\n  )])])])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","ref","_createElementVNode","type","id","fo","r","_createVNode","_Transition","appear","onEnter","$options","_hoisted_3","_hoisted_4","_hoisted_7","_hoisted_11","accept","onChange","_hoisted_12","_hoisted_13","_hoisted_15","onClick","_hoisted_18"],"sourceRoot":"","sources":["/Users/boo/Desktop/poiesis/src/components/UploadButton.vue"],"sourcesContent":["<template>\n    <div class=\"navBar\">\n     <transition appear @enter=\"cursor\">\n      <span ref=\"cursor\" class=\"cursor\">_</span>\n      </transition>\n      <span class=\"text\"></span>\n      <div class=\"something\">\n        <div class=\"darkmode Button\">\n          <button></button>\n        </div>\n      </div>\n    </div>\n    <div class=\"container\">\n      <div class=\"row\">\n             <div class=\"graph horizontal-container\">\n                <h3>Outline</h3>\n              </div>\n              <div class=\"col\">\n                  <div class=\"row\">\n                     <div class=\"upload horizontal-container\">\n                        <h3>Upload your graph</h3>\n                        <input class=\"upload-button\" type=\"file\" accept=\"image/*\" @change=\"uploadFile\"/>\n                        <input type=\"file\" id=\"files\" class=\"hidden\"/>\n                        <label fo r=\"files\">Select file</label>\n                      </div>\n                      <div class=\"undoRedo horizontal-container\">\n                        <h3>Functional Bar</h3>\n                        <div class=\"button-group\">\n                          <button @click=\"undoHistory\"> Undo </button>\n                          <button @click=\"redoHistory\"> Redo </button>\n                          <button @click=\"onBoundingBoxActive\"> Bounding Box </button>\n                          <button @click=\"logCanvasData\"> Log Canvas </button>\n                        </div>\n                      \n                      </div>\n\n                  </div>\n                  <div class=\"horizontal-container min-height\">\n                    <h3>Graph</h3>\n                    <canvas ref=\"can\"></canvas>\n                  </div>\n              </div>\n      </div>\n    </div>\n    \n   \n</template>\n\n<script>\nimport { fabric } from 'fabric';\nimport BoundingBox from '../assets/BoundingBox.js'\nimport History from '../assets/StateStore.js'\nimport gsap from 'gsap'\n\nexport default {\n\n\n  name: 'imageUpload',\n  props: {\n      canW: {\n          type: [String,Number],\n          required: true\n      },\n      canH: {\n          type: [String,Number],\n          required: true\n      },\n  },\n  data() {\n    return {\n      item:{\n          image : null,\n          imageUrl: null\n      },\n      canvas: null,\n      boundingBoxActive: false,\n      bgSet: false,\n    }\n  },\n  mounted() {\n      \n      this.canvas = new fabric.Canvas(this.$refs.can, {selection: false});\n      this.canvas.setDimensions({width: this.canW, height: this.canH});\n      this.history = new History();\n  },\n  methods: {\n    cursor(el){\n      gsap.to(el,{opacity:0,ease:\"power2.inOut\",repeat:-1})\n    },\n    turnOffListeners() {\n      if (this.boundingBoxActive) {\n        this.boundingBoxActive = !this.boundingBoxActive;\n      }\n      this.canvas.off('mouse:down').off('mouse:move').off('mouse:up');\n    },\n    updateHistory() {\n      this.canvas.renderAll();\n      console.log(JSON.stringify(this.canvas));\n      this.history.push(JSON.stringify(this.canvas));\n    },\n    undoHistory() {\n      this.turnOffListeners();\n      this.canvas.loadFromJSON(this.history.undo());\n    },\n    redoHistory() {\n      this.turnOffListeners();\n      this.canvas.loadFromJSON(this.history.redo());\n    },\n    uploadFile(e) {\n      const file = e.target.files[0];\n      this.item.image = file;\n      this.item.imageUrl = URL.createObjectURL(file);\n      this.canvas.setBackgroundImage(this.item.imageUrl, this.canvas.renderAll.bind(this.canvas));\n      this.canvas.renderAll();\n      this.bgSet = 1;\n    },\n    onBoundingBoxActive() {\n      if (this.bgSet) {\n        this.updateHistory();\n        this.bgSet = !this.bgSet;\n      }\n      this.boundingBoxActive = !this.boundingBoxActive;\n      BoundingBox(this.canvas, this.boundingBoxActive, this.history);   \n    },\n    logCanvasData() {\n      console.log(JSON.stringify(this.canvas));\n    }\n  },\n\n} \n</script>"]},"metadata":{},"sourceType":"module"}