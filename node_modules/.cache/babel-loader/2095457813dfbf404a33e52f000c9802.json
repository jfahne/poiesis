{"ast":null,"code":"import { createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  ref: \"can\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.onChange && $options.onChange(...args))\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  ), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.onBoundingBoxActive && $options.onBoundingBoxActive(...args))\n  }, \" Bounding Box \"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.logCanvasData && $options.logCanvasData(...args))\n  }, \" Log Canvas \"), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.undoHistory && $options.undoHistory(...args))\n  }, \" Undo \"), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.redoHistory && $options.redoHistory(...args))\n  }, \" Redo \"), _createElementVNode(\"canvas\", _hoisted_1, null, 512\n  /* NEED_PATCH */\n  )], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;AAMYA,KAAG,EAAC;;;6DALZC,oBAAyD,OAAzD,EAAyD;AAAlDC,QAAI,EAAC,MAA6C;AAAtCC,UAAM,EAAC,SAA+B;AAApBC,YAAM,yCAAEC,+CAAF;AAAc,GAAzD;;AAAA,KACAJ,oBAA4D,QAA5D,EAA4D;AAAnDK,WAAK,yCAAED,qEAAF;AAA8C,GAA5D,EAAqC,gBAArC,GACAJ,oBAAoD,QAApD,EAAoD;AAA3CK,WAAK,yCAAED,yDAAF;AAAsC,GAApD,EAA+B,cAA/B,GACAJ,oBAA4C,QAA5C,EAA4C;AAAnCK,WAAK,yCAAED,qDAAF;AAA8B,GAA5C,EAA6B,QAA7B,GACAJ,oBAA4C,QAA5C,EAA4C;AAAnCK,WAAK,yCAAED,qDAAF;AAA8B,GAA5C,EAA6B,QAA7B,GACAJ,oBAA2B,QAA3B,cAA2B,IAA3B,EAA2B;AAAA;AAA3B","names":["ref","_createElementVNode","type","accept","onChange","$options","onClick"],"sourceRoot":"","sources":["C:\\Users\\joeyf\\Documents\\CIS 671\\poiesis\\src\\components\\UploadButton.vue"],"sourcesContent":["<template>\r\n    <input type=\"file\" accept=\"image/*\" @change=\"onChange\" />\r\n    <button @click=\"onBoundingBoxActive\"> Bounding Box </button>\r\n    <button @click=\"logCanvasData\"> Log Canvas </button>\r\n    <button @click=\"undoHistory\"> Undo </button>\r\n    <button @click=\"redoHistory\"> Redo </button>\r\n    <canvas ref=\"can\"></canvas>\r\n</template>\r\n\r\n<script>\r\nimport { fabric } from 'fabric';\r\nimport BoundingBox from '../assets/BoundingBox.js'\r\nimport History from '../assets/StateStore.js'\r\n\r\nexport default {\r\n  name: 'imageUpload',\r\n  props: {\r\n      canW: {\r\n          type: [String,Number],\r\n          required: true\r\n      },\r\n      canH: {\r\n          type: [String,Number],\r\n          required: true\r\n      },\r\n  },\r\n  data() {\r\n    return {\r\n      item:{\r\n          image : null,\r\n          imageUrl: null\r\n      },\r\n      canvas: null,\r\n       boundingBoxActive: false,\r\n    }\r\n  },\r\n  mounted() {\r\n      this.canvas = new fabric.Canvas(this.$refs.can, {selection: false});\r\n      this.canvas.setDimensions({width: this.canW, height: this.canH});\r\n      this.history = new History();\r\n  },\r\n  methods: {\r\n    turnOffListeners() {\r\n      if (this.boundingBoxActive) {\r\n        this.boundingBoxActive = !this.boundingBoxActive;\r\n      }\r\n      this.canvas.off('mouse:down').off('mouse:move').off('mouse:up');\r\n    },\r\n    updateHistory() {\r\n      this.canvas.renderAll();\r\n      console.log(JSON.stringify(this.canvas));\r\n      this.history.push(JSON.stringify(this.canvas));\r\n    },\r\n    undoHistory() {\r\n      this.turnOffListeners();\r\n      this.canvas.loadFromJSON(this.history.undo());\r\n    },\r\n    redoHistory() {\r\n      this.turnOffListeners();\r\n      this.canvas.loadFromJSON(this.history.redo());\r\n    },\r\n    onChange(e) {\r\n      this.uploadFile(e);\r\n      this.updateHistory();\r\n    },\r\n    uploadFile(e) {\r\n      const file = e.target.files[0];\r\n      this.item.image = file;\r\n      this.item.imageUrl = URL.createObjectURL(file);\r\n      const canvas = this.canvas;\r\n      fabric.Image.fromURL(this.item.imageUrl, function(img) {\r\n        canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\r\n      }, {crossOrigin: 'Anonymous'});\r\n      this.canvas.renderAll();\r\n    },\r\n    onBoundingBoxActive() {\r\n      this.boundingBoxActive = !this.boundingBoxActive;\r\n      BoundingBox(this.canvas, this.boundingBoxActive, this.history);   \r\n    },\r\n    logCanvasData() {\r\n      console.log(JSON.stringify(this.canvas));\r\n    }\r\n  },\r\n\r\n} \r\n</script>"]},"metadata":{},"sourceType":"module"}