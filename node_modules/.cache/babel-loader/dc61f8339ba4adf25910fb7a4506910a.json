{"ast":null,"code":"import { fabric } from \"fabric\";\nexport default function (canvas) {\n  let box, isDown, origX, origY;\n  canvas.on('mouse:down', function (o) {\n    isDown = true;\n    let pointer = canvas.getPointer(o.e);\n    origX = pointer.x;\n    origY = pointer.y;\n    pointer = canvas.getPointer(o.e);\n    box = new fabric.Rect({\n      left: origX,\n      top: origY,\n      fill: 'yellow',\n      width: pointer.x - origX,\n      height: pointer.y - origY,\n      opacity: 0.5\n    });\n    canvas.add(box);\n  });\n  canvas.on('mouse:move', function (o) {\n    if (!isDown) return;\n    let pointer = canvas.getPointer(o.e);\n\n    if (origX > pointer.x) {\n      box.set({\n        left: Math.abs(pointer.x)\n      });\n    }\n\n    if (origY > pointer.y) {\n      box.set({\n        top: Math.abs(pointer.y)\n      });\n    }\n\n    box.set({\n      width: origX - pointer.x\n    });\n    box.set({\n      height: origY - pointer.y\n    });\n    canvas.renderAll();\n  });\n  canvas.on('mouse:up', function () {\n    isDown = false;\n    canvas.off('mouse:down').off('mouse:move').off('mouse:up');\n  });\n} // code from https://stackoverflow.com/questions/9417603/fabric-js-free-draw-a-rectangle","map":{"version":3,"sources":["/home/joe/Desktop/poiesis/src/assets/BoundingBox.js"],"names":["fabric","canvas","box","isDown","origX","origY","on","o","pointer","getPointer","e","x","y","Rect","left","top","fill","width","height","opacity","add","set","Math","abs","renderAll","off"],"mappings":"AAAA,SAASA,MAAT,QAAuB,QAAvB;AAEA,eAAe,UAASC,MAAT,EAAiB;AAC5B,MAAIC,GAAJ,EAASC,MAAT,EAAiBC,KAAjB,EAAwBC,KAAxB;AAEAJ,EAAAA,MAAM,CAACK,EAAP,CAAU,YAAV,EAAwB,UAASC,CAAT,EAAY;AAChCJ,IAAAA,MAAM,GAAG,IAAT;AACA,QAAIK,OAAO,GAAGP,MAAM,CAACQ,UAAP,CAAkBF,CAAC,CAACG,CAApB,CAAd;AACAN,IAAAA,KAAK,GAAGI,OAAO,CAACG,CAAhB;AACAN,IAAAA,KAAK,GAAGG,OAAO,CAACI,CAAhB;AACAJ,IAAAA,OAAO,GAAGP,MAAM,CAACQ,UAAP,CAAkBF,CAAC,CAACG,CAApB,CAAV;AACAR,IAAAA,GAAG,GAAG,IAAIF,MAAM,CAACa,IAAX,CAAgB;AAClBC,MAAAA,IAAI,EAAEV,KADY;AAElBW,MAAAA,GAAG,EAAEV,KAFa;AAGlBW,MAAAA,IAAI,EAAE,QAHY;AAIlBC,MAAAA,KAAK,EAAET,OAAO,CAACG,CAAR,GAAYP,KAJD;AAKlBc,MAAAA,MAAM,EAAEV,OAAO,CAACI,CAAR,GAAYP,KALF;AAMlBc,MAAAA,OAAO,EAAE;AANS,KAAhB,CAAN;AAQAlB,IAAAA,MAAM,CAACmB,GAAP,CAAWlB,GAAX;AACH,GAfD;AAiBAD,EAAAA,MAAM,CAACK,EAAP,CAAU,YAAV,EAAwB,UAASC,CAAT,EAAY;AAChC,QAAI,CAACJ,MAAL,EAAa;AACb,QAAIK,OAAO,GAAGP,MAAM,CAACQ,UAAP,CAAkBF,CAAC,CAACG,CAApB,CAAd;;AAEA,QAAIN,KAAK,GAAGI,OAAO,CAACG,CAApB,EAAuB;AACnBT,MAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEP,QAAAA,IAAI,EAAEQ,IAAI,CAACC,GAAL,CAASf,OAAO,CAACG,CAAjB;AAAR,OAAR;AACH;;AACD,QAAIN,KAAK,GAAGG,OAAO,CAACI,CAApB,EAAuB;AACnBV,MAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEN,QAAAA,GAAG,EAAEO,IAAI,CAACC,GAAL,CAASf,OAAO,CAACI,CAAjB;AAAP,OAAR;AACH;;AACDV,IAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEJ,MAAAA,KAAK,EAAEb,KAAK,GAAGI,OAAO,CAACG;AAAzB,KAAR;AACAT,IAAAA,GAAG,CAACmB,GAAJ,CAAQ;AAAEH,MAAAA,MAAM,EAAEb,KAAK,GAAGG,OAAO,CAACI;AAA1B,KAAR;AAEAX,IAAAA,MAAM,CAACuB,SAAP;AACH,GAdD;AAgBAvB,EAAAA,MAAM,CAACK,EAAP,CAAU,UAAV,EAAsB,YAAW;AAC7BH,IAAAA,MAAM,GAAG,KAAT;AACAF,IAAAA,MAAM,CAACwB,GAAP,CAAW,YAAX,EAAyBA,GAAzB,CAA6B,YAA7B,EAA2CA,GAA3C,CAA+C,UAA/C;AACH,GAHD;AAIH,C,CAED","sourcesContent":["import { fabric } from \"fabric\";\n\nexport default function(canvas) {\n    let box, isDown, origX, origY;\n\n    canvas.on('mouse:down', function(o) {\n        isDown = true;\n        let pointer = canvas.getPointer(o.e);\n        origX = pointer.x;\n        origY = pointer.y;\n        pointer = canvas.getPointer(o.e);\n        box = new fabric.Rect({\n            left: origX,\n            top: origY,\n            fill: 'yellow',\n            width: pointer.x - origX,\n            height: pointer.y - origY,\n            opacity: 0.5\n        });\n        canvas.add(box);\n    });\n\n    canvas.on('mouse:move', function(o) {\n        if (!isDown) return;\n        let pointer = canvas.getPointer(o.e);\n\n        if (origX > pointer.x) {\n            box.set({ left: Math.abs(pointer.x) });\n        }\n        if (origY > pointer.y) {\n            box.set({ top: Math.abs(pointer.y) });\n        }\n        box.set({ width: origX - pointer.x });\n        box.set({ height: origY - pointer.y });\n\n        canvas.renderAll();\n    });\n\n    canvas.on('mouse:up', function() {\n        isDown = false;\n        canvas.off('mouse:down').off('mouse:move').off('mouse:up');\n    });\n}\n\n// code from https://stackoverflow.com/questions/9417603/fabric-js-free-draw-a-rectangle"]},"metadata":{},"sourceType":"module"}